<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./index.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
<div id="main">
<h1 class="libtitle">CoqDSC.LambdaALDeriveProofs</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab123"></a><h1 class="section">New proof of correctness for "classic" non caching differentiation.</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.omega.Omega.html#"><span class="id" title="library">Omega</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Arith.Wf_nat.html#"><span class="id" title="library">Wf_nat</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.Misc.html#"><span class="id" title="library">Misc</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.ErrorMonad.html#"><span class="id" title="library">ErrorMonad</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.Environment.html#"><span class="id" title="library">Environment</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaAL.html#"><span class="id" title="library">LambdaAL</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.Constants.html#"><span class="id" title="library">Constants</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALValues.html#"><span class="id" title="library">LambdaALValues</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#"><span class="id" title="library">LambdaALOperationalSemantics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#"><span class="id" title="library">LambdaALOperationalSemanticsProofs</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALDerive.html#"><span class="id" title="library">LambdaALDerive</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#"><span class="id" title="library">LambdaALValidity</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#"><span class="id" title="library">LambdaALEnvValidity</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALFundamentalProperty.html#"><span class="id" title="library">LambdaALFundamentalProperty</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

    Proof of Theorem 3.3 (Soundness of differentiation in λAL).

<div class="paragraph"> </div>

    If <span class="inlinecode"><a class="idref" href="CoqDSC.LambdaALValues.html#dE"><span class="id" title="variable">dE</span></a></span> is a valid change environment from base environment <span class="inlinecode"><a class="idref" href="CoqDSC.Environment.html#E"><span class="id" title="variable">E</span></a></span> to
    updated environment <span class="inlinecode"><a class="idref" href="CoqDSC.Environment.html#E'"><span class="id" title="variable">E'</span></a></span>, and if <span class="inlinecode"><a class="idref" href="CoqDSC.Environment.html#t"><span class="id" title="definition">t</span></a></span> converges both in the base
    and updated environment, then the derivative of <span class="inlinecode"><a class="idref" href="CoqDSC.Environment.html#t"><span class="id" title="definition">t</span></a></span> evaluates
    under the change environment <span class="inlinecode"><a class="idref" href="CoqDSC.LambdaALValues.html#dE"><span class="id" title="variable">dE</span></a></span> to a valid change <span class="inlinecode"><a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#dv"><span class="id" title="variable">dv</span></a></span> between
    base result <span class="inlinecode"><a class="idref" href="CoqDSC.LibTactics.html#v"><span class="id" title="variable">v</span></a></span> and updated result <span class="inlinecode"><a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#v'"><span class="id" title="variable">v'</span></a></span>.

<div class="paragraph"> </div>


</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a name="derive_soundness"><span class="id" title="lemma">derive_soundness</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">dE</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">[</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⇓</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">[</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⇓</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">exists</span></a> <span class="id" title="var">dv</span><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">[[</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">⇓</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">]]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v'"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hrel</span> <span class="id" title="var">Heval</span> <span class="id" title="var">Heval'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#sound_eval"><span class="id" title="lemma">sound_eval</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heval</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">Hneval</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hreln</span>: <a class="idref" href="CoqDSC.LambdaALValidity.html#drel_env"><span class="id" title="definition">drel_env</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span>). <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="CoqDSC.LambdaALFundamentalProperty.html#fundamental_lemma"><span class="id" title="lemma">fundamental_lemma</span></a> <span class="id" title="var">t</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hreln</span>). <span class="id" title="tactic">intro</span> <span class="id" title="var">Hrelt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#unfold_drel_term"><span class="id" title="lemma">unfold_drel_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrelt</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#drel_term_F"><span class="id" title="definition">drel_term_F</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrelt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hn</span> : <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>). <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">edestruct</span> (<span class="id" title="var">Hrelt</span> <span class="id" title="var">n</span> <span class="id" title="var">Hn</span> <span class="id" title="var">_</span> <span class="id" title="var">Hneval</span> <span class="id" title="var">_</span> <span class="id" title="var">Heval'</span>). <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#9482aae3d3b06e249765c1225dbb8cbb"><span class="id" title="notation">-</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">with</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#drel_value_move_value"><span class="id" title="lemma">drel_value_move_value</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">omega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <a name="derive_soundness2"><span class="id" title="lemma">derive_soundness2</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">dE</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">dv</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">[</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⇓</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">[</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⇓</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">[[</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">⇓</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">]]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v'"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Hrel</span> <span class="id" title="var">H</span> <span class="id" title="var">H'</span> <span class="id" title="var">Hd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#derive_soundness"><span class="id" title="lemma">derive_soundness</span></a> <span class="id" title="var">Hrel</span> <span class="id" title="var">H</span> <span class="id" title="var">H'</span>) <span class="id" title="keyword">as</span> [ <span class="id" title="var">dv'</span> [ <span class="id" title="var">Hd'</span> <span class="id" title="var">Hm</span> ] ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">dv</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">dv'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#deterministic_deval"><span class="id" title="lemma">deterministic_deval</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="modified_environment_of_closure_denvironment"><span class="id" title="lemma">modified_environment_of_closure_denvironment</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">c</span> <span class="id" title="var">x</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#move_environment"><span class="id" title="definition">move_environment</span></a> (<a class="idref" href="CoqDSC.LambdaALValues.html#values_of_list"><span class="id" title="definition">values_of_list</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#list_of_closure_denvironment"><span class="id" title="definition">list_of_closure_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#denvironment_of_closure_denvironment"><span class="id" title="definition">denvironment_of_closure_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#c"><span class="id" title="variable">c</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#f1d0c93cf3a4c2546abcd77134ca0628"><span class="id" title="notation">⌈</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#list_of_closure_denvironment"><span class="id" title="definition">list_of_closure_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#c"><span class="id" title="variable">c</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#f1d0c93cf3a4c2546abcd77134ca0628"><span class="id" title="notation">⌉</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="CoqDSC.LambdaALValues.html#list_of_values"><span class="id" title="definition">list_of_values</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#x"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#modified_environment"><span class="id" title="definition">modified_environment</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">HmoveE</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> * |- *; <span class="id" title="var">inverse</span> <span class="id" title="var">HmoveE</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">v</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#64a6660c5ed3e47856f7e7c848c9c807"><span class="id" title="notation">⊕</span></a> <span class="id" title="var">d</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> * |- *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CoqDSC.ErrorMonad.html#inv_success_mbind"><span class="id" title="lemma">inv_success_mbind</span></a> <span class="id" title="var">H0</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">inverse</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CoqDSC.ErrorMonad.html#inv_success_mbind"><span class="id" title="lemma">inv_success_mbind</span></a> <span class="id" title="var">HmoveE</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HmoveE</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HmoveE</span>. <span class="id" title="var">inverse</span> <span class="id" title="var">HmoveE</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">HmoveE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHc</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="derive_graft_tuple"><span class="id" title="lemma">derive_graft_tuple</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ctx</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> (<a class="idref" href="CoqDSC.LambdaAL.html#graft"><span class="id" title="definition">graft</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#ctx"><span class="id" title="variable">ctx</span></a> (<a class="idref" href="CoqDSC.LambdaAL.html#ttuple"><span class="id" title="definition">ttuple</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#xs"><span class="id" title="variable">xs</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaAL.html#dgraft"><span class="id" title="definition">dgraft</span></a> (<a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#ctx"><span class="id" title="variable">ctx</span></a>) (<a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> (<a class="idref" href="CoqDSC.LambdaAL.html#ttuple"><span class="id" title="definition">ttuple</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#xs"><span class="id" title="variable">xs</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHctx</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="derive_context_ended_with_tuple"><span class="id" title="lemma">derive_context_ended_with_tuple</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> { <span class="id" title="var">ctx</span> <span class="id" title="var">dE</span> <span class="id" title="var">xs</span> <span class="id" title="var">dEu</span> <span class="id" title="var">bs</span> },<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">[[</span></a><a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#ctx"><span class="id" title="variable">ctx</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⇑</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dEu"><span class="id" title="variable">dEu</span></a><a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">]]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookups"><span class="id" title="definition">Environment.lookups</span></a> (<a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dEu"><span class="id" title="variable">dEu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a>) <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">vs</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#bs"><span class="id" title="variable">bs</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">dvs</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#bs"><span class="id" title="variable">bs</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">[[</span></a><a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> (<a class="idref" href="CoqDSC.LambdaAL.html#graft"><span class="id" title="definition">graft</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#ctx"><span class="id" title="variable">ctx</span></a> (<a class="idref" href="CoqDSC.LambdaAL.html#ttuple"><span class="id" title="definition">ttuple</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#xs"><span class="id" title="variable">xs</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⇑</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALValues.html#tuple"><span class="id" title="definition">LambdaALValues.tuple</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#vs"><span class="id" title="variable">vs</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#dtuple"><span class="id" title="definition">LambdaALValues.dtuple</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dvs"><span class="id" title="variable">dvs</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dEu"><span class="id" title="variable">dEu</span></a><a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">]]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inverse</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#original_environment_lookups"><span class="id" title="lemma">original_environment_lookups</span></a> <span class="id" title="var">dE</span> <span class="id" title="var">xs</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hlookups</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#SDTupleContext"><span class="id" title="constructor">SDTupleContext</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dE'</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#STuple"><span class="id" title="constructor">STuple</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#NoSteps"><span class="id" title="constructor">NoSteps</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#SDTuple"><span class="id" title="constructor">SDTuple</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#NoSteps"><span class="id" title="constructor">NoSteps</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#SDVar"><span class="id" title="constructor">SDVar</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inverse</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>. <span class="id" title="var">use</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#SDCallContext"><span class="id" title="constructor">SDCallContext</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inverse</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>. <span class="id" title="var">use</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#SDTupleContext"><span class="id" title="constructor">SDTupleContext</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">exact</span> 0.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="derive_context_ended_with_call"><span class="id" title="lemma">derive_context_ended_with_call</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> { <span class="id" title="var">ctx</span> <span class="id" title="var">dE</span> <span class="id" title="var">dEu</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">dv</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">[[</span></a><a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#ctx"><span class="id" title="variable">ctx</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⇑</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dEu"><span class="id" title="variable">dEu</span></a><a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">]]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">[</span></a><a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dEu"><span class="id" title="variable">dEu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">@(</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#f"><span class="id" title="variable">f</span></a><a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">)</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">⇓</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#1cdbb28de46816ab21e16a69859bc55a"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">[[</span></a><a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dEu"><span class="id" title="variable">dEu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaAL.html#dcall"><span class="id" title="definition">LambdaAL.dcall</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">⇓</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#9896d80982198b9a6b161fbd8b69b895"><span class="id" title="notation">]]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">[[</span></a><a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> (<a class="idref" href="CoqDSC.LambdaAL.html#graft"><span class="id" title="definition">graft</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#ctx"><span class="id" title="variable">ctx</span></a> <a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">@(</span></a><a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#f"><span class="id" title="variable">f</span></a><a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">)</span></a>) <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⇑</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="CoqDSC.LambdaALDeriveProofs.html#dEu"><span class="id" title="variable">dEu</span></a><a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">)</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">]]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hderive</span> <span class="id" title="var">Hcall</span> <span class="id" title="var">Hdcall</span>; <span class="id" title="var">inverse</span> <span class="id" title="var">Hderive</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#SDCallContext"><span class="id" title="constructor">SDCallContext</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dE'</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#SDNilContext"><span class="id" title="constructor">SDNilContext</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#SDCallContext"><span class="id" title="constructor">SDCallContext</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHctx</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdcall</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdcall</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#SDTupleContext"><span class="id" title="constructor">SDTupleContext</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHctx</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdcall</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdcall</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
    </div>
    <div id="footer">
      Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
    </div>
  </div>
  </body>
</html>

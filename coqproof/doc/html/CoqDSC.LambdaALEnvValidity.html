<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./index.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
<div id="main">
<h1 class="libtitle">CoqDSC.LambdaALEnvValidity</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.ErrorMonad.html#"><span class="id" title="library">ErrorMonad</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.Misc.html#"><span class="id" title="library">Misc</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.Environment.html#"><span class="id" title="library">Environment</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.omega.Omega.html#"><span class="id" title="library">Omega</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LibTactics.html#"><span class="id" title="library">LibTactics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.funind.FunInd.html#"><span class="id" title="library">FunInd</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaAL.html#"><span class="id" title="library">LambdaAL</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALValues.html#"><span class="id" title="library">LambdaALValues</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#"><span class="id" title="library">LambdaALOperationalSemantics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#"><span class="id" title="library">LambdaALOperationalSemanticsProofs</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALDerive.html#"><span class="id" title="library">LambdaALDerive</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#"><span class="id" title="library">LambdaALValidity</span></a>.<br/>

<br/>
</div>

<div class="doc">
The following relation represents values and change values that
    are related at every level of precision. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="rel_value"><span class="id" title="definition">rel_value</span></a> <span class="id" title="var">v</span> <span class="id" title="var">dv</span> <span class="id" title="var">v'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">k</span>, <a class="idref" href="CoqDSC.LambdaALValidity.html#drel_value"><span class="id" title="definition">drel_value</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v'"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="rel_env"><span class="id" title="definition">rel_env</span></a> <span class="id" title="var">env</span> <span class="id" title="var">denv</span> <span class="id" title="var">env'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <a class="idref" href="CoqDSC.LambdaALValidity.html#drel_env"><span class="id" title="definition">drel_env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#env"><span class="id" title="variable">env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#env'"><span class="id" title="variable">env'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> : <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#denvironment"><span class="id" title="definition">denvironment</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a name="ValidNil"><span class="id" title="constructor">ValidNil</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
<br/>
| <a name="ValidCons"><span class="id" title="constructor">ValidCons</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">denv</span> <span class="id" title="var">v</span> <span class="id" title="var">dv</span> <span class="id" title="var">v'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#move"><span class="id" title="definition">move</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <span class="id" title="var">denv'</span> <span class="id" title="var">dt'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#dClosure"><span class="id" title="constructor">dClosure</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv'"><span class="id" title="variable">denv'</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dt'"><span class="id" title="variable">dt'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">env'</span> := <a class="idref" href="CoqDSC.LambdaALValues.html#values_of_list"><span class="id" title="definition">values_of_list</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#list_of_closure_denvironment"><span class="id" title="definition">list_of_closure_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv'"><span class="id" title="variable">denv'</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#Closure"><span class="id" title="constructor">Closure</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#env'"><span class="id" title="variable">env'</span></a> (<a class="idref" href="CoqDSC.LambdaALDerive.html#underive"><span class="id" title="definition">underive</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dt'"><span class="id" title="variable">dt'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> (<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#denvironment_of_closure_denvironment"><span class="id" title="definition">denvironment_of_closure_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv'"><span class="id" title="variable">denv'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> (<a class="idref" href="CoqDSC.Environment.html#bind"><span class="id" title="definition">bind</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="valid_closure_changes"><span class="id" title="definition">valid_closure_changes</span></a> <span class="id" title="var">v</span> <span class="id" title="var">dv</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">denv'</span> <span class="id" title="var">dt'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#dClosure"><span class="id" title="constructor">dClosure</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv'"><span class="id" title="variable">denv'</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dt'"><span class="id" title="variable">dt'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">env'</span> := <a class="idref" href="CoqDSC.LambdaALValues.html#values_of_list"><span class="id" title="definition">values_of_list</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#list_of_closure_denvironment"><span class="id" title="definition">list_of_closure_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv'"><span class="id" title="variable">denv'</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#Closure"><span class="id" title="constructor">Closure</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#env'"><span class="id" title="variable">env'</span></a> (<a class="idref" href="CoqDSC.LambdaALDerive.html#underive"><span class="id" title="definition">underive</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dt'"><span class="id" title="variable">dt'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> (<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#denvironment_of_closure_denvironment"><span class="id" title="definition">denvironment_of_closure_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv'"><span class="id" title="variable">denv'</span></a>)<br/>
&nbsp;&nbsp;).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="valid_denvironment_lookup_moves_well"><span class="id" title="lemma">valid_denvironment_lookup_moves_well</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">denv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">dv</span>, <a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">exists</span></a> <span class="id" title="var">v'</span><a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#move"><span class="id" title="definition">move</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v'"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Henv</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Henv</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.ErrorMonad.html#error"><span class="id" title="definition">error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHenv</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="valid_denvironment_lookups_moves_well"><span class="id" title="lemma">valid_denvironment_lookups_moves_well</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">denv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">vdv</span>, <a class="idref" href="CoqDSC.Environment.html#lookups"><span class="id" title="definition">lookups</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#vdv"><span class="id" title="variable">vdv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#vdv"><span class="id" title="variable">vdv</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">dv</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#vdv"><span class="id" title="variable">vdv</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">exists</span></a> <span class="id" title="var">v'</span><a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#move_values"><span class="id" title="definition">move_values</span></a> (<a class="idref" href="CoqDSC.LambdaALValues.html#values_of_list"><span class="id" title="definition">values_of_list</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a>) (<a class="idref" href="CoqDSC.LambdaALValues.html#ldvalues_of_list"><span class="id" title="definition">ldvalues_of_list</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v'"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Henv</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> * |- *; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="CoqDSC.Environment.html#lookups"><span class="id" title="definition">lookups</span></a> <span class="id" title="var">denv</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">intros</span> * <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <span class="id" title="var">denv</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">intros</span> * <span class="id" title="var">Heq'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> * |- *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq'</span> <span class="id" title="tactic">in</span> * |- *. <span class="id" title="tactic">simpl</span>  <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> * |- *. <span class="id" title="var">inverse</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <span class="id" title="var">IHx</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment_lookup_moves_well"><span class="id" title="lemma">valid_denvironment_lookup_moves_well</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Henv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="valid_denvironment_moves_well"><span class="id" title="lemma">valid_denvironment_moves_well</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">denv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">exists</span></a> <span class="id" title="var">env'</span><a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#move_environment"><span class="id" title="definition">move_environment</span></a> (<a class="idref" href="CoqDSC.LambdaALValues.html#values_of_list"><span class="id" title="definition">values_of_list</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a>) <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#env'"><span class="id" title="variable">env'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">denv</span> <span class="id" title="var">Henv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Henv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <a class="idref" href="CoqDSC.LambdaALValues.html#VNil"><span class="id" title="constructor">VNil</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHenv</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="CoqDSC.LambdaALValues.html#VCons"><span class="id" title="constructor">VCons</span></a> <span class="id" title="var">v'</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="valid_denvironment_contains_ok_closure"><span class="id" title="lemma">valid_denvironment_contains_ok_closure</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> { <span class="id" title="var">denv</span> },<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_denvironment"><span class="id" title="inductive">valid_denvironment</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> { <span class="id" title="var">f</span> <span class="id" title="var">v</span> <span class="id" title="var">denv'</span> <span class="id" title="var">dt'</span> },<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALValues.html#dClosure"><span class="id" title="constructor">dClosure</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv'"><span class="id" title="variable">denv'</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dt'"><span class="id" title="variable">dt'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#valid_closure_changes"><span class="id" title="definition">valid_closure_changes</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> (<a class="idref" href="CoqDSC.LambdaALValues.html#dClosure"><span class="id" title="constructor">dClosure</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv'"><span class="id" title="variable">denv'</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dt'"><span class="id" title="variable">dt'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> * <span class="id" title="var">Henv</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Henv</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.ErrorMonad.html#error"><span class="id" title="definition">error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.ErrorMonad.html#ret"><span class="id" title="definition">ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">v0</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHenv</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="lookup_env_of_denv"><span class="id" title="lemma">lookup_env_of_denv</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> { <span class="id" title="var">denv</span> <span class="id" title="var">v</span> <span class="id" title="var">dv</span> <span class="id" title="var">x</span> },<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">denv</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.ErrorMonad.html#ret"><span class="id" title="definition">ret</span></a>, <a class="idref" href="CoqDSC.ErrorMonad.html#error"><span class="id" title="definition">error</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a name="lookup_move_environment"><span class="id" title="lemma">lookup_move_environment</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> { <span class="id" title="var">x</span> <span class="id" title="var">denv</span> <span class="id" title="var">v</span> <span class="id" title="var">dv</span> <span class="id" title="var">env'</span> },<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#move_environment"><span class="id" title="definition">move_environment</span></a> (<a class="idref" href="CoqDSC.LambdaALValues.html#values_of_list"><span class="id" title="definition">values_of_list</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a>) <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#denv"><span class="id" title="variable">denv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">exists</span></a> <span class="id" title="var">v'</span><a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> (<a class="idref" href="CoqDSC.LambdaALValues.html#list_of_values"><span class="id" title="definition">list_of_values</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#env'"><span class="id" title="variable">env'</span></a>) <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#move"><span class="id" title="definition">move</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v'"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hlookup_x_denv</span> <span class="id" title="var">Hmove</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">env'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">functional</span> <span class="id" title="tactic">induction</span> (<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <span class="id" title="var">denv</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlookup_x_denv</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hmove</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">env'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">v0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v2</span> <span class="id" title="var">dv2</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CoqDSC.ErrorMonad.html#inv_success_mbind2"><span class="id" title="lemma">inv_success_mbind2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmove</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.ErrorMonad.html#ret"><span class="id" title="definition">ret</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmove</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Hmove</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x</span> [ <span class="id" title="var">Heq</span> <span class="id" title="var">Hmove'</span> ] ]; <span class="id" title="tactic">apply</span> <a class="idref" href="CoqDSC.ErrorMonad.html#inv_success_mbind2"><span class="id" title="lemma">inv_success_mbind2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmove'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Hmove'</span> <span class="id" title="keyword">as</span> [ <span class="id" title="var">x'</span> [ <span class="id" title="var">Heq'</span> <span class="id" title="var">Hmove''</span> ] ]; <span class="id" title="var">inverts</span> <span class="id" title="var">Hmove''</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">v0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHo</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;Switch&nbsp;around&nbsp;quantifiers&nbsp;to&nbsp;help&nbsp;inversion&nbsp;on&nbsp;the&nbsp;result.<br/>
&nbsp;&nbsp;In&nbsp;the&nbsp;input,&nbsp;we&nbsp;get&nbsp;for&nbsp;each&nbsp;step-index&nbsp;k,&nbsp;an&nbsp;inductive&nbsp;proof&nbsp;that&nbsp;the&nbsp;environments&nbsp;match&nbsp;at&nbsp;depth&nbsp;n.<br/>
&nbsp;&nbsp;In&nbsp;the&nbsp;result,&nbsp;we&nbsp;get&nbsp;an&nbsp;inductive&nbsp;proof&nbsp;that&nbsp;for&nbsp;each&nbsp;step-index&nbsp;k,&nbsp;the&nbsp;environments&nbsp;match&nbsp;at&nbsp;depth&nbsp;k.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="invert_rel_env"><span class="id" title="lemma">invert_rel_env</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span>, <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CoqDSC.LambdaALValidity.html#pre_drel_env"><span class="id" title="inductive">pre_drel_env</span></a> (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_value"><span class="id" title="definition">rel_value</span></a>) <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">E</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">dE</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">E'</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hrel</span>; <span class="id" title="var">lets</span> <span class="id" title="var">Hrel1</span> : <span class="id" title="var">Hrel</span> 1; <span class="id" title="var">inverts</span> <span class="id" title="var">Hrel1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hrel__k</span> : <span class="id" title="var">Hrel</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hrel__k</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hrel__n</span> : <span class="id" title="var">Hrel</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inverts</span> <span class="id" title="var">Hrel__n</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="original_environment_under_rel_env"><span class="id" title="lemma">original_environment_under_rel_env</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span>, <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hrel__alt</span>: <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#invert_rel_env"><span class="id" title="lemma">invert_rel_env</span></a> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hrel__alt</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">fequals</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="modified_environment_under_rel_env"><span class="id" title="lemma">modified_environment_under_rel_env</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span>, <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#f1d0c93cf3a4c2546abcd77134ca0628"><span class="id" title="notation">⌈</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#f1d0c93cf3a4c2546abcd77134ca0628"><span class="id" title="notation">⌉</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#invert_rel_env"><span class="id" title="lemma">invert_rel_env</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hrel</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#modified_environment"><span class="id" title="definition">modified_environment</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHrel</span> |- *; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHHrel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hvmove</span> : @<a class="idref" href="CoqDSC.LambdaALValidity.html#drel_value_move_value"><span class="id" title="lemma">drel_value_move_value</span></a> 1 (<span class="id" title="var">H</span> 1); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hvmove</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;rel_env_original_and_modified_env:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;forall&nbsp;dE&nbsp;E',&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⌈&nbsp;dE&nbsp;⌉&nbsp;=&nbsp;Some&nbsp;E'&nbsp;-&gt;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel_env&nbsp;⌊&nbsp;dE&nbsp;⌋&nbsp;dE&nbsp;E'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;*&nbsp;HE'.&nbsp;intro&nbsp;n.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unfold&nbsp;drel_env.&nbsp;&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rel_env_lookup_value'"><span class="id" title="lemma">rel_env_lookup_value'</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span> <span class="id" title="var">v</span> <span class="id" title="var">x</span> <span class="id" title="var">v0</span> <span class="id" title="var">dv</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">Environment.lookup</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">Environment.lookup</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v0"><span class="id" title="variable">v0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#invert_rel_env"><span class="id" title="lemma">invert_rel_env</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hrel</span>; <span class="id" title="var">introv</span> <span class="id" title="var">HlookE</span> <span class="id" title="var">HlookdE</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inverts</span> <span class="id" title="var">HlookE</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="var">inverts</span> <span class="id" title="var">HlookE</span>; <span class="id" title="var">inverts</span> <span class="id" title="var">HlookdE</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rel_env_lookup_value"><span class="id" title="lemma">rel_env_lookup_value</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span> <span class="id" title="var">v</span> <span class="id" title="var">x</span> <span class="id" title="var">dEu</span> <span class="id" title="var">Eu</span> <span class="id" title="var">Eu'</span> <span class="id" title="var">v0</span> <span class="id" title="var">dv</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#Eu"><span class="id" title="variable">Eu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a>) (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dEu"><span class="id" title="variable">dEu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a>) (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#Eu'"><span class="id" title="variable">Eu'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">Environment.lookup</span></a> (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#Eu"><span class="id" title="variable">Eu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a>) <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">Environment.lookup</span></a> (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dEu"><span class="id" title="variable">dEu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a>) <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v0"><span class="id" title="variable">v0</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env_lookup_value'"><span class="id" title="lemma">rel_env_lookup_value'</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CoqDSC.LambdaALFundamentalProperty.html#"><span class="id" title="library">LambdaALFundamentalProperty</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rel_env_through_context_evaluation"><span class="id" title="lemma">rel_env_through_context_evaluation</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ctx</span> <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span> <span class="id" title="var">Eu</span> <span class="id" title="var">Eu'</span> <span class="id" title="var">dEu</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#1413d6cc04761d501b915a7702e5423d"><span class="id" title="notation">[</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#1413d6cc04761d501b915a7702e5423d"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#ctx"><span class="id" title="variable">ctx</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#1413d6cc04761d501b915a7702e5423d"><span class="id" title="notation">⇑</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#Eu"><span class="id" title="variable">Eu</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#1413d6cc04761d501b915a7702e5423d"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#1413d6cc04761d501b915a7702e5423d"><span class="id" title="notation">[</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#1413d6cc04761d501b915a7702e5423d"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#ctx"><span class="id" title="variable">ctx</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#1413d6cc04761d501b915a7702e5423d"><span class="id" title="notation">⇑</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#Eu'"><span class="id" title="variable">Eu'</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#1413d6cc04761d501b915a7702e5423d"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">[[</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="CoqDSC.LambdaALDerive.html#derive"><span class="id" title="definition">derive</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#ctx"><span class="id" title="variable">ctx</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">⇑</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dEu"><span class="id" title="variable">dEu</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#01bd7ca0eb1860d1a800146303cd75bc"><span class="id" title="notation">]]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#Eu"><span class="id" title="variable">Eu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a>) (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dEu"><span class="id" title="variable">dEu</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a>) (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#Eu'"><span class="id" title="variable">Eu'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx</span>; <span class="id" title="tactic">intros</span> * <span class="id" title="var">Hrelenv</span> <span class="id" title="var">Hoeval</span> <span class="id" title="var">Hmeval</span> <span class="id" title="var">Hdeval</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inverse</span> <span class="id" title="var">Hoeval</span>; <span class="id" title="var">inverse</span> <span class="id" title="var">Hmeval</span>; <span class="id" title="var">inverse</span> <span class="id" title="var">Hdeval</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">k</span>; <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHctx</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">k'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">v3</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">v1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#original_environment_under_rel_env"><span class="id" title="lemma">original_environment_under_rel_env</span></a> <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span> <span class="id" title="var">Hrelenv</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#deterministic_eval"><span class="id" title="lemma">deterministic_eval</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#DrelCons"><span class="id" title="constructor">DrelCons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#sound_eval"><span class="id" title="lemma">sound_eval</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span>) <span class="id" title="keyword">as</span> [ <span class="id" title="var">k''</span> <span class="id" title="var">Heval</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="CoqDSC.LambdaALFundamentalProperty.html#fundamental_lemma"><span class="id" title="lemma">fundamental_lemma</span></a> (<a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">@(</span></a><span class="id" title="var">v</span><a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">,</span></a> <span class="id" title="var">v0</span><a class="idref" href="CoqDSC.LambdaAL.html#27003d1bd41c1816f797600a4e4d367c"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">Hrelenv</span> (<span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">k''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> 1))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#unfold_drel_term"><span class="id" title="lemma">unfold_drel_term</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#drel_term_F"><span class="id" title="definition">drel_term_F</span></a>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk''</span> : <span class="id" title="var">k''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">k''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> 1) <span class="id" title="tactic">by</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hrel</span> <span class="id" title="var">k''</span> <span class="id" title="var">Hk''</span> <span class="id" title="var">_</span> <span class="id" title="var">Heval</span> <span class="id" title="var">_</span> <span class="id" title="var">H7</span>). <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">dv</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#deterministic_deval"><span class="id" title="lemma">deterministic_deval</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="CoqDSC.LambdaALValidity.html#drel_value_antimonotonic"><span class="id" title="lemma">drel_value_antimonotonic</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hrelenv</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="var">erewrite</span> (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#original_environment_under_rel_env"><span class="id" title="lemma">original_environment_under_rel_env</span></a> <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span> <span class="id" title="var">Hrelenv</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">xs</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.Misc.html#reverse_map"><span class="id" title="lemma">reverse_map</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">v1</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#deterministic_eval"><span class="id" title="lemma">deterministic_eval</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#DrelCons"><span class="id" title="constructor">DrelCons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#sound_eval"><span class="id" title="lemma">sound_eval</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H4</span>) <span class="id" title="keyword">as</span> [ <span class="id" title="var">k''</span> <span class="id" title="var">Heval</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="CoqDSC.LambdaALFundamentalProperty.html#fundamental_lemma"><span class="id" title="lemma">fundamental_lemma</span></a> (<a class="idref" href="CoqDSC.LambdaAL.html#ttuple"><span class="id" title="definition">ttuple</span></a> <span class="id" title="var">xs</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">Hrelenv</span> (<span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">k''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> 1))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#unfold_drel_term"><span class="id" title="lemma">unfold_drel_term</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.LambdaALValidity.html#drel_term_F"><span class="id" title="definition">drel_term_F</span></a>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hrel</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hk''</span> : <span class="id" title="var">k''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#989c98e7ddd65d5bf37c334ff2076de8"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">k'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">k''</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> 1) <span class="id" title="tactic">by</span> <span class="id" title="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hrel</span> <span class="id" title="var">k''</span> <span class="id" title="var">Hk''</span> <span class="id" title="var">_</span> <span class="id" title="var">Heval</span> <span class="id" title="var">_</span> <span class="id" title="var">H6</span>). <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">dv</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemanticsProofs.html#deterministic_deval"><span class="id" title="lemma">deterministic_deval</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="CoqDSC.LambdaALValidity.html#drel_value_antimonotonic"><span class="id" title="lemma">drel_value_antimonotonic</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H5</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hrelenv</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">omega</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rel_env_length"><span class="id" title="lemma">rel_env_length</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span>, <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">E</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌊</span></a> <span class="id" title="var">dE</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#2c0a5a7a3edbd2d036ce52734d0e9f72"><span class="id" title="notation">⌋</span></a>). <span class="id" title="var">erewrite</span> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#original_environment_under_rel_env"><span class="id" title="lemma">original_environment_under_rel_env</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#original_environment"><span class="id" title="definition">original_environment</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#f1d0c93cf3a4c2546abcd77134ca0628"><span class="id" title="notation">⌈</span></a> <span class="id" title="var">dE</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#f1d0c93cf3a4c2546abcd77134ca0628"><span class="id" title="notation">⌉</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">E'</span>). <span class="id" title="var">erewrite</span> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#modified_environment_under_rel_env"><span class="id" title="lemma">modified_environment_under_rel_env</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#modified_environment"><span class="id" title="definition">modified_environment</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="CoqDSC.ErrorMonad.html#list_map_length"><span class="id" title="lemma">list_map_length</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rel_env_lookup_change"><span class="id" title="lemma">rel_env_lookup_change</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E</span> <span class="id" title="var">dE</span> <span class="id" title="var">E'</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#rel_env"><span class="id" title="definition">rel_env</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">exists</span></a> <span class="id" title="var">dv</span><a class="idref" href="CoqDSC.LibTactics.html#4c37c8c4962302e6de2564ace1cb4838"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.Environment.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dE"><span class="id" title="variable">dE</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="CoqDSC.LambdaALEnvValidity.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="CoqDSC.LambdaALEnvValidity.html#dv"><span class="id" title="variable">dv</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="CoqDSC.LambdaALEnvValidity.html#original_environment_under_rel_env"><span class="id" title="lemma">original_environment_under_rel_env</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CoqDSC.LambdaALOperationalSemantics.html#original_environment"><span class="id" title="definition">original_environment</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CoqDSC.Environment.html#map_lookup_2"><span class="id" title="lemma">map_lookup_2</span></a> <span class="id" title="var">H0</span>). <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.8.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">x0</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> * |- *. <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
    </div>
    <div id="footer">
      Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
    </div>
  </div>
  </body>
</html>
